<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: CfYAML</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">CfYAML</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/cfyaml_rb.html">
                cfyaml.rb
                </a>
        &nbsp;(<a href="http://rubyforge.org/viewvc/lib/libcfruby/cfyaml.rb?root=cfruby&view=markup"><acronym title="Concurrent Versioning System">CVS</acronym></a>)
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
A set of methods for loading and automatically executing highly-compressed
cfrubyscript in yaml form
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000273">configure_file</a>&nbsp;&nbsp;
      <a href="#M000269">delete</a>&nbsp;&nbsp;
      <a href="#M000270">disable</a>&nbsp;&nbsp;
      <a href="#M000268">evaluate</a>&nbsp;&nbsp;
      <a href="#M000271">execute</a>&nbsp;&nbsp;
      <a href="#M000272">install_packages</a>&nbsp;&nbsp;
      <a href="#M000266">load</a>&nbsp;&nbsp;
      <a href="#M000274">parse_options</a>&nbsp;&nbsp;
      <a href="#M000267">process</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">

    <div id="class-list">
      <h3 class="section-bar">Classes and Modules</h3>

      Class <a href="CfYAML/CfYamlError.html" class="link">CfYAML::CfYamlError</a><br />
Class <a href="CfYAML/StructureError.html" class="link">CfYAML::StructureError</a><br />

    </div>




      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000273" class="method-detail">
        <a name="M000273"></a>

        <div class="method-heading">
          <a href="CfYAML.src/M000273.html" target="Code" class="method-signature"
            onclick="popupCode('CfYAML.src/M000273.html');return false;">
          <span class="method-name">configure_file</span><span class="method-args">(structure)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
takes a structure loaded from yaml (a Hash or <a
href="Array.html">Array</a> of Hash&#8216;s) and executes it as a series of
cfrubyscript commands. Each Hash must contain a <tt>filename</tt> key which
dictates the file (or files) to be worked on. The following keys are then
executed in order. any subkey that takes options may define them in an
option hash, and then redefine the main variables in a subkey using the
same name as in: set:
</p>
<pre>
  options:
    whitespace: true
  set: ['variable', 'value' ]
</pre>
<p>
Options will cascade to the next item in the sequence.
</p>
<table>
<tr><td valign="top">mkdir:</td><td>If <tt>filename</tt> does not exist, create it as a directory

</td></tr>
<tr><td valign="top">touch:</td><td>If <tt>filename</tt> does not exist, create it as an empty file

</td></tr>
<tr><td valign="top">template:</td><td>If <tt>filename</tt> is singular and doesn&#8216;t exist, this file will be
copied into its&#8217; place

</td></tr>
<tr><td valign="top">user:</td><td>Executes a chown command with this user and group (or currently running
group if group is not given)

</td></tr>
<tr><td valign="top">group:</td><td>Executes a chmod command with this group and user (or currently running
user if user is not given)

</td></tr>
<tr><td valign="top">mode:</td><td>Executes a chmod with this mode

</td></tr>
<tr><td valign="top">comment:</td><td>Comments the line or lines given

</td></tr>
<tr><td valign="top">uncomment:</td><td>Uncomments the line or lines given

</td></tr>
<tr><td valign="top">set:</td><td>Executes set passing name, value pairs as given

</td></tr>
<tr><td valign="top">replace:</td><td>Executes the replace command passing regex, str pairs as given

</td></tr>
<tr><td valign="top">must_not_contain:</td><td>Executes file_must_not_contain

</td></tr>
<tr><td valign="top">must_contain:</td><td>Executes file_must_contain

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000269" class="method-detail">
        <a name="M000269"></a>

        <div class="method-heading">
          <a href="CfYAML.src/M000269.html" target="Code" class="method-signature"
            onclick="popupCode('CfYAML.src/M000269.html');return false;">
          <span class="method-name">delete</span><span class="method-args">(hash)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Deletes the file or <a href="Array.html">Array</a> of files in
hash[&#8216;<a href="CfYAML.html#M000269">delete</a>&#8217;]. May take an
optional options: key that may contain any option suitable for passing to
FileOps.delete
</p>
        </div>
      </div>

      <div id="method-M000270" class="method-detail">
        <a name="M000270"></a>

        <div class="method-heading">
          <a href="CfYAML.src/M000270.html" target="Code" class="method-signature"
            onclick="popupCode('CfYAML.src/M000270.html');return false;">
          <span class="method-name">disable</span><span class="method-args">(hash)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Disables the file or <a href="Array.html">Array</a> of files in
hash[&#8216;<a href="CfYAML.html#M000270">disable</a>&#8217;]. May take an
optional options: key that may contain any option suitable for passing to
FileOps.disable
</p>
        </div>
      </div>

      <div id="method-M000268" class="method-detail">
        <a name="M000268"></a>

        <div class="method-heading">
          <a href="CfYAML.src/M000268.html" target="Code" class="method-signature"
            onclick="popupCode('CfYAML.src/M000268.html');return false;">
          <span class="method-name">evaluate</span><span class="method-args">(hash)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Evaluates the code or <a href="Array.html">Array</a> of code in
hash[&#8216;eval&#8217;]
</p>
        </div>
      </div>

      <div id="method-M000271" class="method-detail">
        <a name="M000271"></a>

        <div class="method-heading">
          <a href="CfYAML.src/M000271.html" target="Code" class="method-signature"
            onclick="popupCode('CfYAML.src/M000271.html');return false;">
          <span class="method-name">execute</span><span class="method-args">(hash)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Executes the command or <a href="Array.html">Array</a> of commands in
hash[&#8216;<a href="CfYAML.html#M000271">execute</a>&#8217;]
</p>
<table>
<tr><td valign="top">user:</td><td>Run the command(s) as user

</td></tr>
<tr><td valign="top">useshell:</td><td>Run the commands in the default shell (not compatible with user)

</td></tr>
<tr><td valign="top">arguments:</td><td>If useshell is given, then the arguments should be given as an <a
href="Array.html">Array</a> in arguments

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000272" class="method-detail">
        <a name="M000272"></a>

        <div class="method-heading">
          <a href="CfYAML.src/M000272.html" target="Code" class="method-signature"
            onclick="popupCode('CfYAML.src/M000272.html');return false;">
          <span class="method-name">install_packages</span><span class="method-args">(hash)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Installs the package or <a href="Array.html">Array</a> of packages in
hash[&#8216;install&#8217;]
</p>
        </div>
      </div>

      <div id="method-M000266" class="method-detail">
        <a name="M000266"></a>

        <div class="method-heading">
          <a href="CfYAML.src/M000266.html" target="Code" class="method-signature"
            onclick="popupCode('CfYAML.src/M000266.html');return false;">
          <span class="method-name">load</span><span class="method-args">(filename, changed=false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Executes a YAML file by loading it and processing each array entry in it in
turn recursively, depth first. <tt>changed</tt> is only used internally.
</p>
        </div>
      </div>

      <div id="method-M000267" class="method-detail">
        <a name="M000267"></a>

        <div class="method-heading">
          <a href="CfYAML.src/M000267.html" target="Code" class="method-signature"
            onclick="popupCode('CfYAML.src/M000267.html');return false;">
          <span class="method-name">process</span><span class="method-args">(object, changed=false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Executes an object loaded from a YAML file. <tt>changed</tt> is only used
internally. Returns true if a known change was made. Specifically, it does
the following (in order):
</p>
<pre>
  1. Check for a +condition+ key.  If it exists, eval it as a ruby statement and stop processing if the
     result of the eval() is false or nil.
  2. Check for a +change_made+ key (which must be set to true or false).  This value is checked against
    whether or not a change was actually made by the *immediately previous* section.  If they do not match, then
    this section will stop processing.
  3. The section is searched for a primary key, which will then determine how the rest of the section is
    processed.  These are:
     * load
     * actions
     * eval
     * filename
     * install
     * delete
     * disable
     * execute
</pre>
        </div>
      </div>

      <h3 class="section-bar">Private Class methods</h3>

      <div id="method-M000274" class="method-detail">
        <a name="M000274"></a>

        <div class="method-heading">
          <a href="CfYAML.src/M000274.html" target="Code" class="method-signature"
            onclick="popupCode('CfYAML.src/M000274.html');return false;">
          <span class="method-name">parse_options</span><span class="method-args">(optionhash)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>